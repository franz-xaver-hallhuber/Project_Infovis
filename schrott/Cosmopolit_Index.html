<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>The Munich Cosmopolit Index</title>
    <script type="text/javascript" src="../abgabe/js/cosmoScript.js"></script>

    <script src="../abgabe/js/jquery.min.js"></script>
    <script src="../abgabe/js/d3.v3.min.js" charset="utf-8"></script>

    <script type="text/javascript" src="../abgabe/js/processRawData.js"></script>
    <link rel="stylesheet" href="../abgabe/styles/cosmoStyle.css">

    <!--
    http://www.mstatistik-muenchen.de/indikatorenatlas/html5/atlas.html?indicator=i57&date=2014
    https://upload.wikimedia.org/wikipedia/commons/5/50/M%C3%BCnchen_-_Stadtbezirke_und_Stadtbezirksteile_%28Karte%29.svg
    http://stackoverflow.com/questions/11808860/arrow-triangles-on-my-svg-line
    -->

    <style>
        div.bar {
            display: inline-block;
            width: 20px;
            height: 75px;   /* We'll override this later */
            background-color: teal;
        }
    </style>
</head>
<body>

<script>


    var filteredResults;
    var cleanedData = [];

    // warten bis beide ajax-aufrufe die Daten vom Server haben
    $.when(fetchAussen(), fetchBinnen()).done(function(aussenPackage, binnenPackage){

        // beiden Datensätze zusammenschmeißen in cleanedData
        cleanedData.push.apply(cleanedData, getCleanedAussenwanderung(aussenPackage[0]));
        cleanedData.push.apply(cleanedData, getCleanedBinnenwanderung(binnenPackage[0]));

        console.log("Formatted both sets and threw them together, now %c"+cleanedData.length+"%c items.",
                "color: blue;",
                "color: default;");

        console.log(cleanedData);



//        var dataset = [ 5, 10, 15, 20, 25 ];
//        d3.select("body")
//                .selectAll("p")
//                .data(dataset)
//                .enter()
//                .append("p")
//                .text(function(d) {
//                    return "I can count up to " + d;
//                })
//                .style("color", function(d) {
//                    if (d > 15) {   //Threshold of 15
//                        return "red";
//                    } else {
//                        return "black";
//                    }
//                });
//
//        d3.select("body")
//                .selectAll("div")
//                .data(cleanedData)
//                .enter()
//                .append("div")
//                .attr("class", "bar")
//                .style("height", function(d){
//                    var height = d.BASISWERT_1*0.4;
//                    return height+"px";
//                })
//                .style("margin-right", "2px");
//
//
//        var svg = d3.select("body")
//                .append("svg");
//
//        var w = 500;
//        var h = 50;
//
//
//        var circles = svg.selectAll("circle")
//                .data(dataset)
//                .enter()
//                .append("circle");
//
//
//
//        circles.attr("cx", function(d, i) {
//                    return (i * 50) + 25;
//                })
//                .attr("cy", h/2)
//                .attr("r", function(d) {
//                    return d;
//                });
//
//
//        var svgtwo = d3.select("body")
//                .append("svg")
//                .attr("width", 500)
//                .attr("height", 500);
//
//        // code, code, code, irrelevant code...
//
//        var lines = svgtwo.selectAll("line")
//                .data(dataset)
//                .enter()
//                .append("line");



















//    animateLines();

//    function animateLines(){
//        lines.attr({
//                    'x1': function(d, i){return i*50},
//                    'y1': 20,
//                    'x2': function(d, i){return i*50+50},
//                    'y2': 20})
//                .attr("stroke-width", "2px")
//                .attr("stroke", "red")
//                .transition()
//                .duration(1000)
//                .ease("elastic")
//                .attr({
//                    'x1': function(d, i){return i*100},
//                    'y1': 20,
//                    'x2': function(d, i){return i*100+50},
//                    'y2': 20
//                })
//                .each("end", animateLines);
//    }




        //        .attr("stroke", "red")
        //            .attr("stroke-width", "2px");
        ;

        //    function timeForTimeline(){ // har
        //        var timeline = svgtwo.append("line")
        //                .attr("stroke", "red")
        //                .attr("stroke-width", "2px");
        //        repeat();
        //
        //        function repeat() {
        //            timeline.attr({
        //                        'x1': 0,
        //                        'y1': 130,
        //                        'x2': 168,
        //                        'y2': 130
        //                    })
        //                    .transition()
        //                    .duration(4000)
        //                    .ease("linear")
        //                    .attr({
        //                        'x1': 0,
        //                        'y1': 430,
        //                        'x2': 168,
        //                        'y2': 430
        //                    })
        //                    .each("end", repeat);
        //        };
        //    };
        //
        //
        //
        //    timeForTimeline();



//                console.log(data.result.records);
//                for(var i = 0; i++; data.result.total){
//                    console.log(data.result.records);
//                    if(data.result.records[i].JAHR == "2008"){
//                        console.log(data.result.records[i]);
//                    }
//                }


    });

    //        homes.filter(function (el) {
    //            return el.price <= 1000 &&
    //                    el.sqft >= 500 &&
    //                    el.num_of_beds >=2 &&
    //                    el.num_of_baths >= 2.5;
    //        });




    //    d3.select("body").append("p").text("New paragraph!");




</script>

<div style="display: inline-block;
            width: 20px;
            height: 75px;
            background-color: teal;"></div>

</body>
</html>